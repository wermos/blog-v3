import{j as d}from"./jsx-runtime.D_zvdyIk.js";import{r as F,a as f}from"./index.DnFo47G-.js";import{c as y}from"./index.N1gbEv3q.js";import{c as M,P as L,u as P,a as A}from"./index.CuvKXAHh.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./index.CzpLPOwZ.js";import"./index.D5aZM6R_.js";var j,R,h={exports:{}},E={};function $(){if(j)return E;j=1;var e=F();var r="function"==typeof Object.is?Object.is:function(e,r){return e===r&&(0!==e||1/e==1/r)||e!=e&&r!=r},t=e.useState,a=e.useEffect,n=e.useLayoutEffect,s=e.useDebugValue;function o(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!r(e,a)}catch{return!0}}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?function(e,r){return r()}:function(e,r){var u=r(),i=t({inst:{value:u,getSnapshot:r}}),c=i[0].inst,d=i[1];return n((function(){c.value=u,c.getSnapshot=r,o(c)&&d({inst:c})}),[e,u,r]),a((function(){return o(c)&&d({inst:c}),e((function(){o(c)&&d({inst:c})}))}),[e]),s(u),u};return E.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:u,E}function z(){return R||(R=1,h.exports=$()),h.exports}var T=z();function U(){return T.useSyncExternalStore(V,(()=>!0),(()=>!1))}function V(){return()=>{}}var w="Avatar",[D,ne]=M(w),[G,b]=D(w),_=f.forwardRef(((e,r)=>{const{__scopeAvatar:t,...a}=e,[n,s]=f.useState("idle");return d.jsx(G,{scope:t,imageLoadingStatus:n,onImageLoadingStatusChange:s,children:d.jsx(L.span,{...a,ref:r})})}));_.displayName=w;var C="AvatarImage",k=f.forwardRef(((e,r)=>{const{__scopeAvatar:t,src:a,onLoadingStatusChange:n=()=>{},...s}=e,o=b(C,t),u=H(a,s),i=P((e=>{n(e),o.onImageLoadingStatusChange(e)}));return A((()=>{"idle"!==u&&i(u)}),[u,i]),"loaded"===u?d.jsx(L.img,{...s,ref:r,src:a}):null}));k.displayName=C;var N="AvatarFallback",q=f.forwardRef(((e,r)=>{const{__scopeAvatar:t,delayMs:a,...n}=e,s=b(N,t),[o,u]=f.useState(void 0===a);return f.useEffect((()=>{if(void 0!==a){const e=window.setTimeout((()=>u(!0)),a);return()=>window.clearTimeout(e)}}),[a]),o&&"loaded"!==s.imageLoadingStatus?d.jsx(L.span,{...n,ref:r}):null}));function I(e,r){return e?r?(e.src!==r&&(e.src=r),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function H(e,{referrerPolicy:r,crossOrigin:t}){const a=U(),n=f.useRef(null),s=a?(n.current||(n.current=new window.Image),n.current):null,[o,u]=f.useState((()=>I(s,e)));return A((()=>{u(I(s,e))}),[s,e]),A((()=>{const e=e=>()=>{u(e)};if(!s)return;const a=e("loaded"),n=e("error");return s.addEventListener("load",a),s.addEventListener("error",n),r&&(s.referrerPolicy=r),"string"==typeof t&&(s.crossOrigin=t),()=>{s.removeEventListener("load",a),s.removeEventListener("error",n)}}),[s,t,r]),o}q.displayName=N;var B=_,K=k,O=q;function W({className:e,...r}){return d.jsx(B,{"data-slot":"avatar",className:y("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...r})}function J({className:e,...r}){return d.jsx(K,{"data-slot":"avatar-image",className:y("aspect-square size-full",e),...r})}function Q({className:e,...r}){return d.jsx(O,{"data-slot":"avatar-fallback",className:y("bg-muted flex size-full items-center justify-center rounded-full",e),...r})}const oe=({src:e,alt:r,fallback:t,className:a})=>d.jsxs(W,{className:a,children:[d.jsx(J,{src:e,alt:r}),d.jsx(Q,{children:t})]});export{oe as default};