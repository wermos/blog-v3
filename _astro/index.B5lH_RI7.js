import{a as s}from"./index.DnFo47G-.js";import{u as O}from"./index.N1gbEv3q.js";import{a as A}from"./index.CuvKXAHh.js";import"./jsx-runtime.D_zvdyIk.js";function C(e,n,{checkForDefaultPrevented:t=!0}={}){return function(r){if(e?.(r),!1===t||!r.defaultPrevented)return n?.(r)}}function y(e,n){return s.useReducer(((e,t)=>n[e][t]??e),e)}var v=e=>{const{present:n,children:t}=e,r=T(n),o="function"==typeof t?t({present:r.isPresent}):s.Children.only(t),i=O(r.ref,P(o));return"function"==typeof t||r.isPresent?s.cloneElement(o,{ref:i}):null};function T(e){const[n,t]=s.useState(),r=s.useRef(null),o=s.useRef(e),i=s.useRef("none"),u=e?"mounted":"unmounted",[a,c]=y(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect((()=>{const e=l(r.current);i.current="mounted"===a?e:"none"}),[a]),A((()=>{const n=r.current,t=o.current;if(t!==e){const r=i.current,s=l(n);c(e?"MOUNT":"none"===s||"none"===n?.display?"UNMOUNT":t&&r!==s?"ANIMATION_OUT":"UNMOUNT"),o.current=e}}),[e,c]),A((()=>{if(n){let e;const t=n.ownerDocument.defaultView??window,s=i=>{const s=l(r.current).includes(i.animationName);if(i.target===n&&s&&(c("ANIMATION_END"),!o.current)){const r=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout((()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=r)}))}},u=e=>{e.target===n&&(i.current=l(r.current))};return n.addEventListener("animationstart",u),n.addEventListener("animationcancel",s),n.addEventListener("animationend",s),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",u),n.removeEventListener("animationcancel",s),n.removeEventListener("animationend",s)}}c("ANIMATION_END")}),[n,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:s.useCallback((e=>{r.current=e?getComputedStyle(e):null,t(e)}),[])}}function l(e){return e?.animationName||"none"}function P(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}v.displayName="Presence";var R=s.createContext(void 0);function S(e){const n=s.useContext(R);return e||n||"ltr"}export{v as P,C as c,S as u};