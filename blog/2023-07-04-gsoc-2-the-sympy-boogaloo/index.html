<!DOCTYPE html><html class="text-foreground bg-background" lang=en-US><head><meta charset=utf-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1,user-scalable=yes" name=viewport><meta content="Astro v5.11.0" name=generator><meta content=True name=HandheldFriendly><meta content=yes name=mobile-web-app-capable><meta content=yes name=apple-mobile-web-app-capable><meta content=default name=apple-mobile-web-app-status-bar-style><meta content="telephone=no,date=no,address=no,email=no,url=no" name=format-detection><meta content=#121212 name=theme-color media="(prefers-color-scheme: dark)"><meta content=#121212 name=theme-color media="(prefers-color-scheme: light)"><link href=/blog-v3/sitemap-index.xml rel=sitemap><link href=/blog-v3/site.webmanifest rel=manifest><link href=/blog-v3/rss.xml rel=alternate type=application/rss+xml title=astro-erudite><link href=/blog-v3/favicon-96x96.png rel=icon type=image/png sizes=96x96><link href=/blog-v3/favicon.svg rel=icon type=image/svg+xml><link href=/blog-v3/favicon.ico rel="shortcut icon"><link href=/blog-v3/apple-touch-icon.png rel=apple-touch-icon sizes=180x180><meta content=astro-erudite name=apple-mobile-web-app-title><link href=/blog-v3/site.webmanifest rel=manifest><meta content=true name=astro-view-transitions-enabled><meta content=animate name=astro-view-transitions-fallback><script type=module src=/blog-v3/_astro/ClientRouter.astro_astro_type_script_index_0_lang.CtSceO8m.js></script><title>GSoC 2 — The SymPy Boogaloo | astro-erudite</title><meta content="GSoC 2 — The SymPy Boogaloo | astro-erudite" name=title><meta content="In this blog post, I will discuss what my 2nd GSoC project is about." name=description><link href=https://astro-erudite.vercel.app rel=canonical><meta content="GSoC 2 — The SymPy Boogaloo" property=og:title><meta content="In this blog post, I will discuss what my 2nd GSoC project is about." property=og:description><meta content=https://astro-erudite.vercel.app/blog-v3/_astro/gsoc-logo-with-sympy-logo.qR6bhI_m.png property=og:image><meta content="GSoC 2 — The SymPy Boogaloo" property=og:image:alt><meta content=website property=og:type><meta content=en-US property=og:locale><meta content=astro-erudite property=og:site_name><meta content=https://wermos.github.io/blog-v3/blog/2023-07-04-gsoc-2-the-sympy-boogaloo/ property=og:url><meta content=jktrn property=og:author><meta content="GSoC 2 — The SymPy Boogaloo" name=twitter:title><meta content="In this blog post, I will discuss what my 2nd GSoC project is about." name=twitter:description><meta content=https://astro-erudite.vercel.app/blog-v3/_astro/gsoc-logo-with-sympy-logo.qR6bhI_m.png property=twitter:image><meta content="GSoC 2 — The SymPy Boogaloo" name=twitter:image:alt><meta content=summary_large_image name=twitter:card><meta content=jktrn name=twitter:creator><meta content=gsoc property=article:tag><meta content=sympy property=article:tag><script>window.MathJax={loader:{load:["[tex]/mathtools"]},tex:{packages:{"[+]":["mathtools"]}},chtml:{adaptiveCSS:!0},startup:{ready:()=>{console.log("MathJax is ready!"),window.MathJax.startup.defaultReady()}}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js async></script><link href=/blog-v3/_astro/about.UInHqjL5.css rel=stylesheet><script type=module src=/blog-v3/_astro/page.D2yfJ-p-.js></script></head><body><div class="flex flex-col gap-y-6 font-sans h-fit min-h-screen"><div class="sticky backdrop-blur-sm bg-background/50 divide-y top-0 xl:divide-none z-50"><header data-astro-transition-persist=astro-l7r54iwe-1><div class="flex items-center px-4 max-w-3xl mx-auto py-3 gap-4 justify-between"><a href=/blog-v3/ target=_self class="flex items-center justify-center duration-300 ease-in-out gap-3 shrink-0 transition-colors"><img alt=Logo class="size-5 sm:size-6" decoding=async fetchpriority=auto height=512 loading=lazy src=/blog-v3/_astro/logo.DwvyYgWz_Z1cij1B.svg width=512> <span class="hidden font-medium h-full min-[300px]:block text-lg">astro-erudite</span></a><div class="flex items-center sm:gap-4"><nav class="text-sm items-center hidden gap-4 sm:flex sm:gap-6"><a href=/blog-v3/blog target=_self class="transition-colors duration-300 ease-in-out inline-block capitalize hover:text-foreground/80 text-foreground/60">blog </a><a href=/blog-v3/authors target=_self class="transition-colors duration-300 ease-in-out inline-block capitalize hover:text-foreground/80 text-foreground/60">authors </a><a href=/blog-v3/about target=_self class="transition-colors duration-300 ease-in-out inline-block capitalize hover:text-foreground/80 text-foreground/60">about</a></nav><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(self.Astro||(self.Astro={})).load=async a=>{await(await a())()},window.dispatchEvent(new Event("astro:load"))</script><script>(()=>{var t=Object.defineProperty,e=(e,r,n)=>((e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n)(e,"symbol"!=typeof r?r+"":r,n);{let t={0:t=>s(t),1:t=>n(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(n(t)),5:t=>new Set(n(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},r=e=>{let[r,n]=e;return r in t?t[r](n):void 0},n=t=>t.map(r),s=t=>"object"!=typeof t||null===t?t:Object.fromEntries(Object.entries(t).map((([t,e])=>[t,r(e)])));class i extends HTMLElement{constructor(){super(...arguments),e(this,"Component"),e(this,"hydrator"),e(this,"hydrate",(async()=>{var t;if(!this.hydrator||!this.isConnected)return;let e=null==(t=this.parentElement)?void 0:t.closest("astro-island[ssr]");if(e)return void e.addEventListener("astro:hydrate",this.hydrate,{once:!0});let r,n=this.querySelectorAll("astro-slot"),i={},o=this.querySelectorAll("template[data-astro-template]");for(let t of o){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(i[t.getAttribute("data-astro-template")||"default"]=t.innerHTML,t.remove())}for(let t of n){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(i[t.getAttribute("name")||"default"]=t.innerHTML)}try{r=this.hasAttribute("props")?s(JSON.parse(this.getAttribute("props"))):{}}catch(t){let e=this.getAttribute("component-url")||"<unknown>",r=this.getAttribute("component-export");throw r&&(e+=` (export ${r})`),console.error(`[hydrate] Error parsing props for component ${e}`,this.getAttribute("props"),t),t}await this.hydrator(this)(this.Component,r,i,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))})),e(this,"unmount",(()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))}))}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(this.hasAttribute("await-children")&&"interactive"!==document.readyState&&"complete"!==document.readyState){let t=()=>{document.removeEventListener("DOMContentLoaded",t),e.disconnect(),this.childrenConnectedCallback()},e=new MutationObserver((()=>{var e;(null==(e=this.lastChild)?void 0:e.nodeType)===Node.COMMENT_NODE&&"astro:end"===this.lastChild.nodeValue&&(this.lastChild.remove(),t())}));e.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",t)}else this.childrenConnectedCallback()}async childrenConnectedCallback(){let t=this.getAttribute("before-hydration-url");t&&await import(t),this.start()}async start(){let t=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(void 0!==Astro[e])try{await Astro[e]((async()=>{let t=this.getAttribute("renderer-url"),[e,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),t?import(t):()=>()=>{}]),n=this.getAttribute("component-export")||"default";if(n.includes(".")){this.Component=e;for(let t of n.split("."))this.Component=this.Component[t]}else this.Component=e[n];return this.hydrator=r,this.hydrate}),t,this)}catch(t){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,t)}else window.addEventListener(`astro:${e}`,(()=>this.start()),{once:!0})}attributeChangedCallback(){this.hydrate()}}e(i,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",i)}})()</script><astro-island await-children client=load component-export=default component-url=/blog-v3/_astro/mobile-menu.HETUW0rB.js opts={&quot;name&quot;:&quot;MobileMenu&quot;,&quot;value&quot;:true} prefix=r14 props={&quot;data-astro-transition-persist&quot;:[0,&quot;astro-wpgf5xh5-2&quot;]} renderer-url=/blog-v3/_astro/client.B2EdmKkk.js ssr uid=Z4LHMa data-astro-transition-persist=astro-wpgf5xh5-2><button class="text-sm items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 disabled:opacity-50 disabled:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 hover:bg-accent hover:text-accent-foreground outline-none shrink-0 transition-all whitespace-nowrap justify-center rounded-md inline-flex [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 [&amp;_svg]:pointer-events-none [&amp;_svg]:shrink-0 dark:hover:bg-accent/50 size-8 sm:hidden" data-slot=dropdown-menu-trigger id=radix-«r14R0» title=Menu aria-expanded=false aria-haspopup=menu data-state=closed type=button><svg class="lucide lucide-menu size-5" height=24 width=24 viewBox="0 0 24 24" aria-hidden=true fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="M4 12h16"></path><path d="M4 18h16"></path><path d="M4 6h16"></path></svg><span class=sr-only>Toggle menu</span></button><!--astro:end--></astro-island><button class="text-sm items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 disabled:opacity-50 disabled:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 hover:bg-accent hover:text-accent-foreground outline-none shrink-0 transition-all whitespace-nowrap justify-center rounded-md inline-flex [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 [&amp;_svg]:pointer-events-none [&amp;_svg]:shrink-0 dark:hover:bg-accent/50 size-8 -me-2" data-slot=button id=theme-toggle title="Toggle theme"><svg class="size-4 transition-all dark:-rotate-90 dark:scale-0 rotate-0 scale-100" height=1em width=1em data-icon=lucide:sun><symbol id=ai:lucide:sun viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><circle cx=12 cy=12 r=4 /><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></g></symbol><use href=#ai:lucide:sun></use></svg> <svg class="size-4 transition-all absolute dark:rotate-0 dark:scale-100 rotate-90 scale-0" height=1em width=1em data-icon=lucide:moon><symbol id=ai:lucide:moon viewBox="0 0 24 24"><path d="M12 3a6 6 0 0 0 9 9a9 9 0 1 1-9-9" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:moon></use></svg> <span class=sr-only>Toggle theme</span></button><script data-astro-rerun>const theme=(()=>{const e=localStorage?.getItem("theme")??"";return["dark","light"].includes(e)?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"})();document.documentElement.setAttribute("data-theme",theme),document.documentElement.classList.add("dark"===theme?"scheme-dark":"scheme-light"),window.localStorage.setItem("theme",theme)</script><script type=module>function a(){const e=document.documentElement,t="dark"===e.getAttribute("data-theme")?"light":"dark";e.classList.add("[&_*]:transition-none"),e.setAttribute("data-theme",t),e.classList.remove("scheme-dark","scheme-light"),e.classList.add("dark"===t?"scheme-dark":"scheme-light"),window.getComputedStyle(e).getPropertyValue("opacity"),requestAnimationFrame((()=>{e.classList.remove("[&_*]:transition-none")})),localStorage.setItem("theme",t)}function s(){const e=document.getElementById("theme-toggle");e&&e.addEventListener("click",a)}s(),document.addEventListener("astro:after-swap",(()=>{const e=localStorage.getItem("theme")||"light",t=document.documentElement;t.classList.add("[&_*]:transition-none"),window.getComputedStyle(t).getPropertyValue("opacity"),t.setAttribute("data-theme",e),t.classList.remove("scheme-dark","scheme-light"),t.classList.add("dark"===e?"scheme-dark":"scheme-light"),requestAnimationFrame((()=>{t.classList.remove("[&_*]:transition-none")})),s()}))</script></div></div></header><div class="w-full xl:hidden" id=mobile-toc-container><details class=group><summary class="flex items-center cursor-pointer justify-between w-full"><div class="flex items-center px-4 max-w-3xl mx-auto py-3 w-full"><div class="size-4 mr-2 relative"><svg class="h-4 w-4" viewBox="0 0 24 24"><circle cx=12 cy=12 r=10 class=text-primary/20 fill=none stroke=currentColor stroke-width=2></circle><circle cx=12 cy=12 r=10 class=text-primary fill=none stroke=currentColor stroke-width=2 id=mobile-toc-progress-circle stroke-dasharray=62.83 stroke-dashoffset=62.83 transform="rotate(-90 12 12)"></circle></svg></div><span class="text-sm text-muted-foreground flex-grow truncate" id=mobile-toc-current-section>Overview </span><span class="text-muted-foreground ml-2"><svg class="duration-200 h-4 transition-transform w-4 group-open:rotate-180" height=1em width=1em data-icon=lucide:chevron-down><symbol id=ai:lucide:chevron-down viewBox="0 0 24 24"><path d="m6 9l6 6l6-6" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:chevron-down></use></svg></span></div></summary><astro-island await-children client=load component-export=ScrollArea component-url=/blog-v3/_astro/scroll-area.Dg9PDF_i.js opts={&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:true} prefix=r15 props="{&quot;className&quot;:[0,&quot;mx-auto max-w-3xl&quot;],&quot;data-toc-header-scroll&quot;:[0,true]}" renderer-url=/blog-v3/_astro/client.B2EdmKkk.js ssr uid=1F4Yvm><div class="relative max-w-3xl mx-auto" data-slot=scroll-area style=position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px dir=ltr data-toc-header-scroll=true><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div class="transition-[color,box-shadow] dark:outline-ring/40 dark:ring-ring/20 focus-visible:outline-1 focus-visible:ring-4 outline-ring/50 ring-ring/10 rounded-[inherit] size-full" data-slot=scroll-area-viewport style=overflow-x:hidden;overflow-y:hidden data-radix-scroll-area-viewport=""><div style=min-width:100%;display:table><astro-slot><div class=max-h-[30vh]><ul class="flex flex-col px-4 gap-y-2 list-none pb-4" id=mobile-table-of-contents><li class="text-sm text-foreground/60 px-4"><a href=#gsoc-with-sympy class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=gsoc-with-sympy>GSoC with SymPy</a></li><li class="text-sm text-foreground/60 px-4"><a href=#wait-what-is-sympy class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=wait-what-is-sympy>Wait, what is SymPy?</a></li><li class="text-sm text-foreground/60 px-4"><a href=#the-project class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=the-project>The Project</a></li><li class="text-sm text-foreground/60 px-4"><a href=#my-gsoc-proposal class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=my-gsoc-proposal>My GSoC Proposal</a></li><li class="text-sm text-foreground/60 px-4"><a href=#what-is-the-latex-parser class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=what-is-the-latex-parser>What is the LaTeX Parser?</a></li><li class="text-sm text-foreground/60 px-4"><a href=#why-does-it-need-a-rewrite class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=why-does-it-need-a-rewrite>Why Does It Need a Rewrite?</a></li><li class="text-sm text-foreground/60 px-4 ml-4"><a href=#some-history class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=some-history>Some History</a></li><li class="text-sm text-foreground/60 px-4 ml-4"><a href=#issues class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=issues>Issues</a></li><li class="text-sm text-foreground/60 px-4"><a href=#alternatives-to-antlr class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=alternatives-to-antlr>Alternatives to ANTLR</a></li><li class="text-sm text-foreground/60 px-4"><a href=#why-lark class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=why-lark>Why Lark?</a></li><li class="text-sm text-foreground/60 px-4"><a href=#prior-work class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit mobile-toc-item" data-heading-id=prior-work>Prior Work</a></li></ul></div></astro-slot></div></div></div><!--astro:end--></astro-island></details></div><script type=module src=/blog-v3/_astro/TOCHeader.astro_astro_type_script_index_0_lang.Dv-sJcE-.js></script></div><main class=grow><div class="flex flex-col px-4 mx-auto gap-y-6 grow"><section class="grid gap-y-6 grid-cols-[minmax(0px,1fr)_min(calc(var(--breakpoint-md)-2rem),100%)_minmax(0px,1fr)]"><div class=col-start-2><nav aria-label=breadcrumb data-slot=breadcrumb><ol class="text-sm items-center flex break-words flex-wrap gap-1.5 sm:gap-2.5 text-muted-foreground" data-slot=breadcrumb-list><li class="gap-1.5 items-center inline-flex" data-slot=breadcrumb-item><a href=/ class="transition-colors hover:text-foreground" data-slot=breadcrumb-link><svg class="shrink-0 size-4" height=1em width=1em data-icon=lucide:home><symbol id=ai:lucide:home viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></g></symbol><use href=#ai:lucide:home></use></svg></a></li><li class=[&amp;&gt;svg]:size-3.5 data-slot=breadcrumb-separator aria-hidden=true role=presentation><svg class="lucide lucide-chevron-right" height=24 width=24 viewBox="0 0 24 24" aria-hidden=true fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="m9 18 6-6-6-6"></path></svg></li><li class="gap-1.5 items-center inline-flex" data-slot=breadcrumb-item><a href=/blog class="transition-colors hover:text-foreground" data-slot=breadcrumb-link><span class="flex items-center gap-x-2"><svg class="shrink-0 size-4" height=1em width=1em data-icon=lucide:library-big><symbol id=ai:lucide:library-big viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><rect height=18 rx=1 width=8 x=3 y=3 /><path d="M7 3v18m13.4-2.1c.2.5-.1 1.1-.6 1.3l-1.9.7c-.5.2-1.1-.1-1.3-.6L11.1 5.1c-.2-.5.1-1.1.6-1.3l1.9-.7c.5-.2 1.1.1 1.3.6Z"/></g></symbol><use href=#ai:lucide:library-big></use></svg> <span>Blog</span></span></a></li><li class=[&amp;&gt;svg]:size-3.5 data-slot=breadcrumb-separator aria-hidden=true role=presentation><svg class="lucide lucide-chevron-right" height=24 width=24 viewBox="0 0 24 24" aria-hidden=true fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 xmlns=http://www.w3.org/2000/svg><path d="m9 18 6-6-6-6"></path></svg></li><li class="gap-1.5 items-center inline-flex" data-slot=breadcrumb-item><span class="text-foreground font-normal" aria-current=page aria-disabled=true data-slot=breadcrumb-page role=link><span class="flex items-center gap-x-2"><svg class="shrink-0 size-4" height=1em width=1em data-icon=lucide:book-open-text><symbol id=ai:lucide:book-open-text viewBox="0 0 24 24"><path d="M12 7v14m4-9h2m-2-4h2M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4a4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3a3 3 0 0 0-3-3zm3-6h2M6 8h2" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:book-open-text></use></svg> <span>GSoC 2 — The SymPy Boogaloo</span></span></span></li></ol></nav></div><img alt="GSoC 2 — The SymPy Boogaloo" class="w-full mx-auto col-span-full max-w-5xl object-cover rounded-xl" decoding=async fetchpriority=auto height=630 loading=lazy src=/blog-v3/_astro/gsoc-logo-with-sympy-logo.qR6bhI_m_Z1R02cU.webp width=1200><section class="flex flex-col gap-y-6 col-start-2 text-center"><div class="flex flex-col"><h1 id=post-title class="leading-tight font-medium mb-2 scroll-mt-31 sm:text-4xl text-3xl">GSoC 2 — The SymPy Boogaloo</h1><div class="flex items-center justify-center flex-col sm:flex-row divide-border divide-y mb-4 sm:divide-x sm:divide-y-0 sm:flex-wrap sm:text-sm text-muted-foreground text-xs"><div class="flex items-center gap-2 py-2 first:sm:pl-0 justify-center last:sm:pr-0 sm:px-2 sm:py-0 sm:w-fit w-full"><svg class=size-3 height=1em width=1em data-icon=lucide:calendar><symbol id=ai:lucide:calendar viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M8 2v4m8-4v4"/><rect height=18 rx=2 width=18 x=3 y=4 /><path d="M3 10h18"/></g></symbol><use href=#ai:lucide:calendar></use></svg> <span>Posted <span class="relative cursor-help" data-full-date="Tue, July 4, 2023 at 8:25 PM GMT+5:30">July 4, 2023</span></span></div><div class="flex items-center gap-2 py-2 first:sm:pl-0 justify-center last:sm:pr-0 sm:px-2 sm:py-0 sm:w-fit w-full"><svg class=size-3 height=1em width=1em data-icon=lucide:clock><symbol id=ai:lucide:clock viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M12 6v6l4 2"/><circle cx=12 cy=12 r=10 /></g></symbol><use href=#ai:lucide:clock></use></svg> <span>7 min read</span></div></div><div class="flex gap-2 justify-center flex-wrap"><a href=/tags/gsoc class="shrink-0 items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium whitespace-nowrap border justify-center rounded-md inline-flex [&#38;>svg]:pointer-events-none [&#38;>svg]:size-3 [a&#38;]:hover:bg-secondary/90 bg-secondary border-transparent gap-1 overflow-hidden px-2 py-0.5 text-secondary-foreground text-xs transition-[color,box-shadow] w-fit"><svg class=size-3 height=1em width=1em data-icon=lucide:hash><symbol id=ai:lucide:hash viewBox="0 0 24 24"><path d="M4 9h16M4 15h16M10 3L8 21m8-18l-2 18" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:hash></use></svg> gsoc </a><a href=/tags/sympy class="shrink-0 items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium whitespace-nowrap border justify-center rounded-md inline-flex [&#38;>svg]:pointer-events-none [&#38;>svg]:size-3 [a&#38;]:hover:bg-secondary/90 bg-secondary border-transparent gap-1 overflow-hidden px-2 py-0.5 text-secondary-foreground text-xs transition-[color,box-shadow] w-fit"><svg class=size-3 height=1em width=1em data-icon=lucide:hash viewBox="0 0 24 24"><use href=#ai:lucide:hash></use></svg> sympy</a></div></div><nav class="col-start-2 gap-4 grid grid-cols-1 sm:grid-cols-2"><a href=/blog-v3/blog/2023-01-14-babys-first-step-in-genshin-theorycrafting#post-title target=_self class="text-sm px-4 [&#38;_svg:not([class*='size-'])]:size-4 [&#38;_svg]:pointer-events-none [&#38;_svg]:shrink-0 aria-invalid:border-destructive aria-invalid:ring-destructive/20 bg-background border dark:aria-invalid:ring-destructive/40 dark:bg-input/30 dark:border-input dark:hover:bg-input/50 disabled:opacity-50 disabled:pointer-events-none duration-300 ease-in-out flex focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 group has-[>svg]:px-3 hover:bg-accent hover:text-accent-foreground items-center outline-none py-2 rounded-lg shrink-0 size-full transition-all whitespace-nowrap justify-start" aria-disabled=false><svg class="size-4 mr-2 group-hover:-translate-x-1 transition-transform" height=1em width=1em data-icon=lucide:arrow-left><symbol id=ai:lucide:arrow-left viewBox="0 0 24 24"><path d="m12 19l-7-7l7-7m7 7H5" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:arrow-left></use></svg><div class="flex flex-col overflow-hidden text-wrap items-start"><span class="text-muted-foreground text-xs text-left">Previous Post </span><span class="text-sm text-balance text-ellipsis w-full text-left">Baby&#39;s First Step Towards Genshin Theorycrafting</span></div></a><a href=/blog-v3/blog/2023-09-11-gsoc-2-the-final-status-report#post-title target=_self class="text-sm px-4 [&#38;_svg:not([class*='size-'])]:size-4 [&#38;_svg]:pointer-events-none [&#38;_svg]:shrink-0 aria-invalid:border-destructive aria-invalid:ring-destructive/20 bg-background border dark:aria-invalid:ring-destructive/40 dark:bg-input/30 dark:border-input dark:hover:bg-input/50 disabled:opacity-50 disabled:pointer-events-none duration-300 ease-in-out flex focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 group has-[>svg]:px-3 hover:bg-accent hover:text-accent-foreground items-center outline-none py-2 rounded-lg shrink-0 size-full transition-all whitespace-nowrap justify-end" aria-disabled=false><div class="flex flex-col overflow-hidden text-wrap items-end"><span class="text-muted-foreground text-xs text-right">Next Post </span><span class="text-sm text-balance text-ellipsis w-full text-right">GSoC 2 — The Final Status Report</span></div><svg class="size-4 transition-transform group-hover:translate-x-1 ml-2" height=1em width=1em data-icon=lucide:arrow-right><symbol id=ai:lucide:arrow-right viewBox="0 0 24 24"><path d="M5 12h14m-7-7l7 7l-7 7" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:arrow-right></use></svg></a></nav></section><div class="hidden col-start-1 h-[calc(100vh-5rem)] max-w-md ml-auto mr-8 row-span-1 sticky top-20 xl:block" id=toc-sidebar-container><astro-island await-children client=load component-export=ScrollArea component-url=/blog-v3/_astro/scroll-area.Dg9PDF_i.js opts={&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:true} prefix=r17 props="{&quot;className&quot;:[0,&quot;flex max-h-[calc(100vh-8rem)] flex-col overflow-y-auto&quot;],&quot;type&quot;:[0,&quot;hover&quot;],&quot;data-toc-scroll-area&quot;:[0,true]}" renderer-url=/blog-v3/_astro/client.B2EdmKkk.js ssr uid=Z2taGeA><div class="flex flex-col max-h-[calc(100vh-8rem)] overflow-y-auto relative" data-slot=scroll-area style=position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px dir=ltr data-toc-scroll-area=true><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div class="transition-[color,box-shadow] dark:outline-ring/40 dark:ring-ring/20 focus-visible:outline-1 focus-visible:ring-4 outline-ring/50 ring-ring/10 rounded-[inherit] size-full" data-slot=scroll-area-viewport style=overflow-x:hidden;overflow-y:hidden data-radix-scroll-area-viewport=""><div style=min-width:100%;display:table><astro-slot><div class="flex flex-col px-4 gap-2"><span class="text-lg font-medium">Table of Contents</span><ul class="flex flex-col gap-y-2 list-none"><li class="text-sm text-foreground/60"><a href=#gsoc-with-sympy class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=gsoc-with-sympy>GSoC with SymPy</a></li><li class="text-sm text-foreground/60"><a href=#wait-what-is-sympy class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=wait-what-is-sympy>Wait, what is SymPy?</a></li><li class="text-sm text-foreground/60"><a href=#the-project class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=the-project>The Project</a></li><li class="text-sm text-foreground/60"><a href=#my-gsoc-proposal class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=my-gsoc-proposal>My GSoC Proposal</a></li><li class="text-sm text-foreground/60"><a href=#what-is-the-latex-parser class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=what-is-the-latex-parser>What is the LaTeX Parser?</a></li><li class="text-sm text-foreground/60"><a href=#why-does-it-need-a-rewrite class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=why-does-it-need-a-rewrite>Why Does It Need a Rewrite?</a></li><li class="text-sm text-foreground/60 ml-4"><a href=#some-history class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=some-history>Some History</a></li><li class="text-sm text-foreground/60 ml-4"><a href=#issues class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=issues>Issues</a></li><li class="text-sm text-foreground/60"><a href=#alternatives-to-antlr class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=alternatives-to-antlr>Alternatives to ANTLR</a></li><li class="text-sm text-foreground/60"><a href=#why-lark class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=why-lark>Why Lark?</a></li><li class="text-sm text-foreground/60"><a href=#prior-work class="transition-colors underline underline-offset-[3px] decoration-transparent duration-200 hover:decoration-inherit list-none marker:text-foreground/30" data-heading-link=prior-work>Prior Work</a></li></ul></div></astro-slot></div></div></div><!--astro:end--></astro-island></div><script type=module>class f{links=document.querySelectorAll("[data-heading-link]");activeIds=[];headings=[];regions=[];scrollArea=null;tocScrollArea=null;reset(){this.links=document.querySelectorAll("#toc-sidebar-container [data-heading-link]"),this.activeIds=[],this.headings=[],this.regions=[];const e=document.getElementById("toc-sidebar-container");this.scrollArea=e?.querySelector("[data-radix-scroll-area-viewport]")||null,this.tocScrollArea=e?.querySelector("[data-toc-scroll-area]")||null}}const e=new f;class c{static build(){e.headings=Array.from(document.querySelectorAll(".prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6")),0!==e.headings.length?e.regions=e.headings.map(((t,s)=>{const l=e.headings[s+1];return{id:t.id,start:t.offsetTop,end:l?l.offsetTop:document.body.scrollHeight}})):e.regions=[]}static getVisibleIds(){if(0===e.headings.length)return[];const t=window.scrollY+95,s=window.scrollY+window.innerHeight,l=new Set;return e.headings.forEach((e=>{const r=e.offsetTop+e.offsetHeight;((e,l)=>e>=t&&e<=s||l>=t&&l<=s||e<=t&&l>=s)(e.offsetTop,r)&&l.add(e.id)})),e.regions.forEach((e=>{if(e.start<=s&&e.end>=t){const r=document.getElementById(e.id);if(r){const o=r.offsetTop+r.offsetHeight;e.end>o&&(o<s||t<e.end)&&l.add(e.id)}}})),Array.from(l)}}class h{static update(){if(!e.scrollArea||!e.tocScrollArea)return;const{scrollTop:t,scrollHeight:s,clientHeight:l}=e.scrollArea,r=t<=5,o=t>=s-l-5;e.tocScrollArea.classList.toggle("mask-t-from-90%",!r),e.tocScrollArea.classList.toggle("mask-b-from-90%",!o)}}class g{static update(t){e.links.forEach((e=>{e.classList.remove("text-foreground")})),t.forEach((e=>{if(e){const t=document.querySelector(`#toc-sidebar-container [data-heading-link="${e}"]`);t&&t.classList.add("text-foreground")}})),this.scrollToActive(t)}static scrollToActive(t){if(!e.scrollArea||!t.length)return;const s=document.querySelector(`#toc-sidebar-container [data-heading-link="${t[0]}"]`);if(!s)return;const{top:l,height:r}=e.scrollArea.getBoundingClientRect(),{top:o,height:i}=s.getBoundingClientRect(),n=o-l+e.scrollArea.scrollTop,a=Math.max(0,Math.min(n-(r-i)/2,e.scrollArea.scrollHeight-e.scrollArea.clientHeight));Math.abs(a-e.scrollArea.scrollTop)>5&&(e.scrollArea.scrollTop=a)}}class d{static handleScroll(){const t=c.getVisibleIds();JSON.stringify(t)!==JSON.stringify(e.activeIds)&&(e.activeIds=t,g.update(e.activeIds))}static handleTOCScroll=()=>h.update();static handleResize(){c.build();const t=c.getVisibleIds();JSON.stringify(t)!==JSON.stringify(e.activeIds)&&(e.activeIds=t,g.update(e.activeIds)),h.update()}static init(){if(e.reset(),c.build(),0===e.headings.length)return void g.update([]);this.handleScroll(),setTimeout(h.update,100);const t={passive:!0};window.addEventListener("scroll",this.handleScroll,t),window.addEventListener("resize",this.handleResize,t),e.scrollArea?.addEventListener("scroll",this.handleTOCScroll,t)}static cleanup(){window.removeEventListener("scroll",this.handleScroll),window.removeEventListener("resize",this.handleResize),e.scrollArea?.removeEventListener("scroll",this.handleTOCScroll),Object.assign(e,{activeIds:[],headings:[],regions:[],scrollArea:null,tocScrollArea:null})}}document.addEventListener("astro:page-load",(()=>d.init())),document.addEventListener("astro:after-swap",(()=>{d.cleanup(),d.init()})),document.addEventListener("astro:before-swap",(()=>d.cleanup()))</script><article class="col-start-2 max-w-none prose"><h1 id=gsoc-with-sympy>GSoC with SymPy</h1><p>In 2023, I decided to apply to just one organization for GSoC: SymPy. I was interested in the parsing, codegen, and printing modules as I had worked with all 3, and solved some interesting bugs in the parsing and printing submodules.</p><p>I knew that, in the past, SymPy has had a little trouble with finding mentors, even for projects they wanted, so I decided to send an <a href=https://groups.google.com/g/sympy/c/NewnNlFSrYc/m/PUAJj7i9AQAJ target=_blank rel="nofollow noreferrer noopener">email</a> to the SymPy mailing list to gauge interest in having a GSoC project in either the parsing or codegen submodules.</p><p>I chose to ask about these two submodules specifically, because out of the three submodules in which I have previous experience, the <a href=https://github.com/sympy/sympy/wiki/GSoC-Ideas#code-generation target=_blank rel="nofollow noreferrer noopener">codegen submodule</a> and the <a href=https://github.com/sympy/sympy/wiki/GSoC-Ideas#parsing target=_blank rel="nofollow noreferrer noopener">parsing submodule</a> have their own dedicated sections on the GSoC Ideas page.</p><p>In response to my email, <a href=https://www.asmeurer.com/blog/about/ target=_blank rel="nofollow noreferrer noopener">Aaron Meurer</a> replied with a few potential GSoC project ideas. Of those ideas, I ended up choosing to write a proposal about rewriting the LaTeX parser, because it is widely used by the community.</p><h2 id=wait-what-is-sympy>Wait, what is SymPy?</h2><p>As the About section on <a href=https://github.com/sympy/sympy target=_blank rel="nofollow noreferrer noopener">SymPy’s GitHub</a> says, SymPy is</p><blockquote><p>A computer algebra system written in pure Python</p></blockquote><p>The way I like to explain it to people is like this: If I were to ask MATLAB what the value of \(d\) is, where</p>\[d = \int\limits_1^2 \! \dfrac{1}{x}\,\mathrm{d}x,\]<p>The answer I would get is <code>d = 0.6931</code>, by running</p><figure data-rehype-pretty-code-figure><figcaption data-language=matlab data-rehype-pretty-code-title data-theme="github-light github-dark">matlab_example.m</figcaption><pre data-language=matlab data-theme="github-light github-dark" style=--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e tabindex=0><code data-language=matlab data-line-numbers data-line-numbers-max-digits=1 data-theme="github-light github-dark" style=display:grid><span data-line><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>func = @(x) </span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>1</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>./x</span></span>
<span data-line><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>d = integral(func, </span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>1</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>, </span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>2</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>)</span></span></code></pre></figure><p>On the other hand, if I run the following SymPy code</p><figure data-rehype-pretty-code-figure><figcaption data-language=py data-rehype-pretty-code-title data-theme="github-light github-dark">python_example.py</figcaption><pre data-language=py data-theme="github-light github-dark" style=--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e tabindex=0><code data-language=py data-line-numbers data-line-numbers-max-digits=1 data-theme="github-light github-dark" style=display:grid><span data-line><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>import</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> sympy </span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>as</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> sp</span></span>
<span data-line><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>from</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> sympy.abc </span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>import</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> x</span></span>
<span data-line> </span>
<span data-line><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>func </span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>=</span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF> 1</span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583> /</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> x</span></span>
<span data-line><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>d </span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>=</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> sp.integrate(func, (x, </span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>1</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>, </span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>2</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>))</span></span>
<span data-line> </span>
<span data-line><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>print</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>(</span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>f</span><span style=--shiki-light:#032F62;--shiki-dark:#9ECBFF>&quot;d = </span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>{</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>d</span><span style=--shiki-light:#005CC5;--shiki-dark:#79B8FF>}</span><span style=--shiki-light:#032F62;--shiki-dark:#9ECBFF>&quot;</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>)</span></span></code></pre></figure><p>I get the output <code>d = log(2)</code>.</p><p>In MATLAB’s case, I got the approximate numerical value, whereas in SymPy’s case, I got the symbolic answer.</p><details class="text-sm px-4 [&#38;[open]>summary]:mb-3 [&#38;[open]>summary_svg:last-child]:rotate-180 border-blue-500 border-l-4 dark:bg-blue-950/5 my-6 py-3 relative" open><summary class="flex items-center cursor-pointer [&::-webkit-details-marker]:hidden font-medium"><svg class="shrink-0 size-4 dark:text-blue-300 mr-2 text-blue-700" height=1em width=1em data-icon=lucide:info><symbol id=ai:lucide:info viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><circle cx=12 cy=12 r=10 /><path d="M12 16v-4m0-4h.01"/></g></symbol><use href=#ai:lucide:info></use></svg> <span class="font-medium mr-2 text-blue-700 dark:text-blue-300">Note </span><svg class="duration-200 h-4 transition-transform w-4 dark:text-blue-300 ml-auto shrink-0 text-blue-700" height=1em width=1em data-icon=lucide:chevron-down viewBox="0 0 24 24"><use href=#ai:lucide:chevron-down></use></svg></summary><div><p>I am aware that MATLAB has a <a href=https://in.mathworks.com/products/symbolic.html target=_blank rel="nofollow noreferrer noopener">Symbolic Math Toolbox™</a> which gives MATLAB symbolic capabilities. On the flip side, running <code>d.evalf()</code> at the end of the SymPy snippet will print <code>0.693147180559945</code> on the terminal. Therefore, the above example is simplistic, but it helps me get the point across.</p></div></details><h1 id=the-project>The Project</h1><p>My project, as I briefly mentioned, is to rewrite the LaTeX parser using <a href=https://github.com/lark-parser/lark.git target=_blank rel="nofollow noreferrer noopener">Lark</a> as the parser generator, instead of <a href=https://www.antlr.org/ target=_blank rel="nofollow noreferrer noopener">ANTLR</a>.</p><h2 id=my-gsoc-proposal>My GSoC Proposal</h2><p>My proposal can be found <a href="https://docs.google.com/document/d/1QgOpu5xwl-i1TBa_TA_qtyvUEc-o_1UBR4SsM-VZmS0/edit?usp=sharing" target=_blank rel="nofollow noreferrer noopener">here</a>. As such, my proposal doesn’t deviate much from the original plan, unlike <a href=/blog/2022-08-30-gsoc-the-details-of-my-project#my-project-proposal>last time</a>.</p><h2 id=what-is-the-latex-parser>What is the LaTeX Parser?</h2><p>The <a href=https://docs.sympy.org/latest/modules/parsing.html#experimental-mathrm-latex-parsing target=_blank rel="nofollow noreferrer noopener">LaTeX parser</a> is one of the submodules in SymPy which allows you to convert a LaTeX expression into a SymPy expression. For example, if I have some LaTeX code like <code>\int\! x^2 \,dx</code>, I can convert it into a SymPy expression by running:</p><figure data-rehype-pretty-code-figure><pre data-language=py data-theme="github-light github-dark" style=--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e tabindex=0><code data-language=py data-line-numbers data-line-numbers-max-digits=1 data-theme="github-light github-dark" style=display:grid><span data-line><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>from</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> sympy.parsing.latex </span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>import</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> parse_latex</span></span>
<span data-line> </span>
<span data-line><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>expr </span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>=</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8> parse_latex(</span><span style=--shiki-light:#D73A49;--shiki-dark:#F97583>r</span><span style=--shiki-light:#032F62;--shiki-dark:#9ECBFF>&quot;</span><span style=--shiki-light:#032F62;--shiki-dark:#DBEDFF>2ab</span><span style=--shiki-light:#032F62;--shiki-dark:#9ECBFF>&quot;</span><span style=--shiki-light:#24292E;--shiki-dark:#E1E4E8>)</span></span></code></pre></figure><p>Once you have this expression, you can do things like substituting values. For example, running <code>expr.evalf(subs=dict(a=5, b=2))</code> after running the above snippet, will give us <code>20.0000000000000</code> as the output.</p><h2 id=why-does-it-need-a-rewrite>Why Does It Need a Rewrite?</h2><p>To get the full picture, we first need to understand the history of the LaTeX parser in SymPy, and how it came to be.</p><h3 id=some-history>Some History</h3><p>Here is a snippet from the <a href=https://docs.sympy.org/latest/modules/parsing.html#experimental-mathrm-latex-parsing target=_blank rel="nofollow noreferrer noopener">documentation for the LaTeX parser</a>:</p><blockquote><p>\(\mathrm{\LaTeX}\) parsing was ported from <a href=https://github.com/augustt198/latex2sympy target=_blank rel="nofollow noreferrer noopener">latex2sympy</a>. While functional and its API should remain stable, the parsing behavior or backend may change in future releases.</p></blockquote><p>If we look at the linked GitHub repository, we see that the project was originally started in January 2016 by <a href=https://github.com/augustt198 target=_blank rel="nofollow noreferrer noopener">augustt198</a>.</p><p>This repository solved a long-standing feature request that people had asked for, as can be seen in this <a href=https://groups.google.com/g/sympy/c/JxtvnWeRC7s target=_blank rel="nofollow noreferrer noopener">SymPy mailing list email thread</a> and <a href=https://github.com/sympy/sympy/issues/5418 target=_blank rel="nofollow noreferrer noopener">this</a> old SymPy issue.</p><p>Soon after the repository was made, long-term SymPy contributor <a href=https://github.com/moorepants target=_blank rel="nofollow noreferrer noopener">@moorepants</a> mentioned in <a href=https://github.com/augustt198/latex2sympy/issues/1 target=_blank rel="nofollow noreferrer noopener">Issue #1</a> that the SymPy community was interested in bring the codebase into SymPy itself.</p><p>After that, the <code>latex2sympy</code> code was merged into SymPy in <a href=https://github.com/sympy/sympy/pull/13706 target=_blank rel="nofollow noreferrer noopener">#13706</a>.</p><p>The reason the history is important is to understand why ANTLR was used: Originally, since the LaTeX parser was not a part of SymPy, <a href=https://github.com/augustt198 target=_blank rel="nofollow noreferrer noopener">augustt198</a> was free to use whatever library he wanted, and he likely felt most comfortable using ANTLR for the task.</p><p>However, after the code became a part of SymPy (and even while that process was happening), there were <a href=https://github.com/sympy/sympy/pull/13706#issuecomment-360930090 target=_blank rel="nofollow noreferrer noopener">some concerns</a> about having ANTLR as an optional dependency. The priority at the time, however, was to get a LaTeX parser into SymPy as a sort of reference implementation or a baseline, and worry about the rest later.</p><h3 id=issues>Issues</h3><p>There were a few issues with ANTLR, which is the reason other alternatives were being considered:</p><ol><li>The runtime package can be difficult to install. There have <a href=https://github.com/augustt198/latex2sympy/issues/32 target=_blank rel="nofollow noreferrer noopener">been</a> <a href=https://github.com/sympy/sympy/issues/14004#issuecomment-1072591073 target=_blank rel="nofollow noreferrer noopener">reports</a> of users who found the LaTeX parser’s runtime dependencies difficult to install. There are a couple of packages on conda-forge with closely related names: <code>antlr4-python3-runtime</code> and <code>antlr-python-runtime</code>. Installing the wrong one causes hard-to-debug issues. As one user who ran into this issue pointed out,<blockquote><p>That’s a few lost hours for each of the two characters</p></blockquote></li><li>The above issue is further exacerbated by the fact that the required package’s name is <code>antlr4-python3-runtime</code> on PyPI.</li></ol><p>In <a href=https://github.com/sympy/sympy/issues/19528 target=_blank rel="nofollow noreferrer noopener">#19528</a>, <a href=https://github.com/sylee957 target=_blank rel="nofollow noreferrer noopener">sylee957</a> pointed out a few more shortcomings of the existing ANTLR-based parser:</p><ol><li>The ANTLR generated files don’t make the parser truly standalone.</li><li>The ANTLR generated files generate huge diffs when changes are made to the grammar files. (<a href=https://github.com/sympy/sympy/pull/23535/files target=_blank rel="nofollow noreferrer noopener">Here is an example.</a>)</li><li>The ANTLR generated files contain version information that cause warnings for the user. The good news is that in spite of the warnings, they appear to run without critical problems. However, this is bad for developers because different versions of ANTLR give differently structured script files, which exacerbates the problem mentioned above, of generating huge diffs.</li><li>The ANTLR generated files contain personal information, which must be filtered out before committing them to version control.</li></ol><p>All of the above shortcomings are reasons to move away from ANTLR and towards a pure Python library.</p><p>One advantage of ANTLR is its performance, which <a href=https://github.com/sympy/sympy/issues/19528#issuecomment-662026674 target=_blank rel="nofollow noreferrer noopener">isn’t that important for this use-case</a>.</p><h2 id=alternatives-to-antlr>Alternatives to ANTLR</h2><p>There are multiple viable alternatives that were originally considered:</p><ol><li><a href=https://github.com/lark-parser/lark target=_blank rel="nofollow noreferrer noopener">lark</a></li><li><a href=https://github.com/alvinwan/tex2py target=_blank rel="nofollow noreferrer noopener">tex2py</a></li><li><a href=https://github.com/erikrose/parsimonious target=_blank rel="nofollow noreferrer noopener">parsimonius</a></li><li><a href=https://github.com/dabeaz/ply target=_blank rel="nofollow noreferrer noopener">ply</a></li></ol><p>Note that all the libraries in the list are Python libraries.</p><p>Of these libraries, Lark was chosen as the library that fits SymPy’s needs best.</p><h2 id=why-lark>Why Lark?</h2><p>Numerous advantages to using Lark <a href=https://github.com/sympy/sympy/issues/19528#issuecomment-662430318 target=_blank rel="nofollow noreferrer noopener">were identified</a>:</p><ol><li>Lark has active, receptive maintainers. For example, when I found something in the documentation that wasn’t being rendered correctly, I opened <a href=https://github.com/lark-parser/lark/issues/1287 target=_blank rel="nofollow noreferrer noopener">an issue</a> for it which was then promptly fixed.</li><li>Lark has good documentation. <a href=https://lark-parser.readthedocs.io/en/latest/grammar.html target=_blank rel="nofollow noreferrer noopener">The documentation</a> is detailed and filled with examples, which makes using the library a lot easier.</li><li>Lark has no runtime dependencies beyond Python’s standard library. This is important because, for example, Parsimonious still needs the external <a href=https://pypi.org/project/regex/ target=_blank rel="nofollow noreferrer noopener">regex</a> package.</li><li>Lark shows strong performance.</li><li>Lark handles ambiguities that PEG parsers cannot. By <a href=https://lark-parser.readthedocs.io/en/latest/parsers.html#earley target=_blank rel="nofollow noreferrer noopener">using the Early parser</a>, for example, Lark can return all a tree with all the possibilities if a certain expression is ambiguous.</li><li>Lark uses a dedicated, self-described format,<ul><li>that cannot include implementation details (e.g. inline python). This is good because the library itself enforces separation of concerns (i.e. keeping the grammar definition separate from the parser).</li><li>which can be stored inline in a <code>.py</code> file, or<ul><li>stored in one or more <code>.lark</code> files.</li></ul></li><li>which has plugins for various editors. For example, there is a <a href=https://github.com/lark-parser/vscode-lark target=_blank rel="nofollow noreferrer noopener">VS Code extension</a> and a <a href=https://github.com/lark-parser/intellij-syntax-highlighting target=_blank rel="nofollow noreferrer noopener">PyCharm plugin</a> for syntax highlighting Lark files,</li><li>can be used to generate parsers in other languages like Julia and JavaScript (see the last point <a href=https://lark-parser.readthedocs.io/en/latest/features.html#extra-features target=_blank rel="nofollow noreferrer noopener">here</a>.)</li></ul></li><li>has a “standard library” of useful tokens and expressions which can be imported into a grammar.</li><li>Lark can generate an standalone <code>.py</code> file. In this case, this is not a big advantage since one of the reasons for moving away from ANTLR was to remove compiled components.</li></ol><h1 id=prior-work>Prior Work</h1><p>There was already some prior work done (before this GSoC project) in rewriting the LaTeX parser: In <a href=https://github.com/sympy/sympy/pull/19825 target=_blank rel="nofollow noreferrer noopener">#19825</a>, <a href=https://github.com/costrouc target=_blank rel="nofollow noreferrer noopener">costrouc</a> started working on removing the ANTLR-based parser and started implementing the Lark-based parser.</p><p>That’s all for this blog post! In this blog post, I tried to give the full history behind the LaTeX parser in SymPy, what the motivation for rewriting it in Lark was, and talked about where we stand currently. Stay tuned to this series for more information and for a work update on what I’ve done so far 😁</p></article><nav class="col-start-2 gap-4 grid grid-cols-1 sm:grid-cols-2"><a href=/blog-v3/blog/2023-01-14-babys-first-step-in-genshin-theorycrafting#post-title target=_self class="text-sm px-4 [&#38;_svg:not([class*='size-'])]:size-4 [&#38;_svg]:pointer-events-none [&#38;_svg]:shrink-0 aria-invalid:border-destructive aria-invalid:ring-destructive/20 bg-background border dark:aria-invalid:ring-destructive/40 dark:bg-input/30 dark:border-input dark:hover:bg-input/50 disabled:opacity-50 disabled:pointer-events-none duration-300 ease-in-out flex focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 group has-[>svg]:px-3 hover:bg-accent hover:text-accent-foreground items-center outline-none py-2 rounded-lg shrink-0 size-full transition-all whitespace-nowrap justify-start" aria-disabled=false><svg class="size-4 mr-2 group-hover:-translate-x-1 transition-transform" height=1em width=1em data-icon=lucide:arrow-left viewBox="0 0 24 24"><use href=#ai:lucide:arrow-left></use></svg><div class="flex flex-col overflow-hidden text-wrap items-start"><span class="text-muted-foreground text-xs text-left">Previous Post </span><span class="text-sm text-balance text-ellipsis w-full text-left">Baby&#39;s First Step Towards Genshin Theorycrafting</span></div></a><a href=/blog-v3/blog/2023-09-11-gsoc-2-the-final-status-report#post-title target=_self class="text-sm px-4 [&#38;_svg:not([class*='size-'])]:size-4 [&#38;_svg]:pointer-events-none [&#38;_svg]:shrink-0 aria-invalid:border-destructive aria-invalid:ring-destructive/20 bg-background border dark:aria-invalid:ring-destructive/40 dark:bg-input/30 dark:border-input dark:hover:bg-input/50 disabled:opacity-50 disabled:pointer-events-none duration-300 ease-in-out flex focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 group has-[>svg]:px-3 hover:bg-accent hover:text-accent-foreground items-center outline-none py-2 rounded-lg shrink-0 size-full transition-all whitespace-nowrap justify-end" aria-disabled=false><div class="flex flex-col overflow-hidden text-wrap items-end"><span class="text-muted-foreground text-xs text-right">Next Post </span><span class="text-sm text-balance text-ellipsis w-full text-right">GSoC 2 — The Final Status Report</span></div><svg class="size-4 transition-transform group-hover:translate-x-1 ml-2" height=1em width=1em data-icon=lucide:arrow-right viewBox="0 0 24 24"><use href=#ai:lucide:arrow-right></use></svg></a></nav></section><button class="text-sm items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 disabled:opacity-50 disabled:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 hover:bg-accent hover:text-accent-foreground outline-none shrink-0 transition-all whitespace-nowrap bg-background border dark:bg-input/30 dark:border-input dark:hover:bg-input/50 group [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 [&amp;_svg]:pointer-events-none [&amp;_svg]:shrink-0 bottom-8 fixed hidden justify-center right-8 rounded-md size-9 z-50" data-slot=button id=scroll-to-top title="Scroll to top" aria-label="Scroll to top"><svg class="size-4 transition-all group-hover:-translate-y-0.5 mx-auto" height=1em width=1em data-icon=lucide:arrow-up><symbol id=ai:lucide:arrow-up viewBox="0 0 24 24"><path d="m5 12l7-7l7 7m-7 7V5" fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 /></symbol><use href=#ai:lucide:arrow-up></use></svg></button><script type=module>document.addEventListener("astro:page-load",(()=>{const e=document.getElementById("scroll-to-top"),o=document.querySelector("footer");e&&o&&(e.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),window.addEventListener("scroll",(()=>{const t=o.getBoundingClientRect().top<=window.innerHeight;e.classList.toggle("hidden",window.scrollY<=300||t)})))}))</script></div></main><footer class=py-4><div class="flex items-center px-4 max-w-3xl mx-auto flex-col gap-y-2 justify-center sm:flex-row sm:justify-between"><div class="flex items-center justify-center flex-wrap gap-x-2 text-center"><span class="text-sm text-muted-foreground">&copy; 2025 All rights reserved.</span><div class="shrink-0 hidden bg-border data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px h-4! sm:block" data-slot=separator-root data-orientation=vertical role=none></div><p class="text-sm text-muted-foreground">Made with 🤍 by <a href=https://github.com/wermos target=_blank class="transition-colors underline underline-offset-[3px] decoration-muted-foreground duration-300 ease-in-out hover:decoration-foreground inline-block text-foreground">wermos </a>!</p></div><ul class="flex gap-2 flex-wrap" role=list><li><a href=https://github.com/wermos target=_blank class="text-sm items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 disabled:opacity-50 disabled:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 hover:bg-accent hover:text-accent-foreground outline-none shrink-0 transition-all whitespace-nowrap bg-background border dark:bg-input/30 dark:border-input dark:hover:bg-input/50 [&#38;_svg:not([class*='size-'])]:size-4 [&#38;_svg]:pointer-events-none [&#38;_svg]:shrink-0 duration-300 ease-in-out inline-flex justify-center rounded-md size-9" aria-label=GitHub title=GitHub><svg class=size-4 height=1em width=1em data-icon=lucide:github><symbol id=ai:lucide:github viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5c.08-1.25-.27-2.48-1-3.5c.28-1.15.28-2.35 0-3.5c0 0-1 0-3 1.5c-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.4 5.4 0 0 0 4 9c0 3.5 3 5.5 6 5.5c-.39.49-.68 1.05-.85 1.65S8.93 17.38 9 18v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></g></symbol><use href=#ai:lucide:github></use></svg></a></li><li><a href=mailto:tirthankar.blog.responses@gmail.com target=_blank class="text-sm items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 disabled:opacity-50 disabled:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 hover:bg-accent hover:text-accent-foreground outline-none shrink-0 transition-all whitespace-nowrap bg-background border dark:bg-input/30 dark:border-input dark:hover:bg-input/50 [&#38;_svg:not([class*='size-'])]:size-4 [&#38;_svg]:pointer-events-none [&#38;_svg]:shrink-0 duration-300 ease-in-out inline-flex justify-center rounded-md size-9" aria-label=Email title=Email><svg class=size-4 height=1em width=1em data-icon=lucide:mail><symbol id=ai:lucide:mail viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="m22 7l-8.991 5.727a2 2 0 0 1-2.009 0L2 7"/><rect height=16 rx=2 width=20 x=2 y=4 /></g></symbol><use href=#ai:lucide:mail></use></svg></a></li><li><a href=rss.xml target=_blank class="text-sm items-center aria-invalid:border-destructive aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 disabled:opacity-50 disabled:pointer-events-none focus-visible:border-ring focus-visible:ring-[3px] focus-visible:ring-ring/50 font-medium gap-2 hover:bg-accent hover:text-accent-foreground outline-none shrink-0 transition-all whitespace-nowrap bg-background border dark:bg-input/30 dark:border-input dark:hover:bg-input/50 [&#38;_svg:not([class*='size-'])]:size-4 [&#38;_svg]:pointer-events-none [&#38;_svg]:shrink-0 duration-300 ease-in-out inline-flex justify-center rounded-md size-9" aria-label=RSS title=RSS><svg class=size-4 height=1em width=1em data-icon=lucide:rss><symbol id=ai:lucide:rss viewBox="0 0 24 24"><g fill=none stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2><path d="M4 11a9 9 0 0 1 9 9M4 4a16 16 0 0 1 16 16"/><circle cx=5 cy=19 r=1 /></g></symbol><use href=#ai:lucide:rss></use></svg></a></li></ul></div></footer></div></body></html>